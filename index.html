<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Biblioteca Musical</title>
  <style>
    body { font-family: sans-serif; background: #f3fff4; color: #333; padding: 20px; }
    h1 { text-align: center; color: #2b7a2b; }
    #busca { width: 100%; max-width: 600px; margin: 0 auto 20px; padding: 12px; font-size: 17px; border-radius: 10px; border: 1.5px solid #4caf50; display: block; }
    .musica { background: #eaf3ea; border-radius: 12px; padding: 15px 20px; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .musica-info { flex: 1; }
    .musica-nome { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
    .musica-cantor { font-size: 14px; color: #4a774a; }
    .fav-btn, .remove-fav { border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; }
    .fav-btn { background: #4caf50; color: white; }
    .remove-fav { background: #cc4b4b; color: white; margin-left: 10px; }
    .obs-text { font-style: italic; color: #4a774a; margin-top: 8px; }
    audio { display: block; margin: 30px auto; width: 100%; max-width: 700px; border-radius: 12px; }
  </style>
</head>
<body>

<h1>Biblioteca Musical</h1>

<input type="search" id="busca" placeholder="Buscar por m√∫sica ou cantor..." />

<audio id="player" controls></audio>

<div id="listaMusicas"></div>

<h2 style="text-align:center;">üéµ M√∫sicas Favoritadas</h2>
<div id="listaFavoritos"></div>

<script>
  const musicas = [
    {
      id: "001",
      nome: "Acima",
      cantor: "Eliezer Rodrigu√™s",
      url: "https://archive.org/download/acima-eliezer-rodrigues/Acima-Eliezer%20Rodrigues.mp3"
    }
  ];

  let favoritos = JSON.parse(localStorage.getItem('favoritosMusicas')) || {};
  const player = document.getElementById('player');
  const listaMusicasEl = document.getElementById('listaMusicas');
  const listaFavoritosEl = document.getElementById('listaFavoritos');
  const buscaInput = document.getElementById('busca');

  function atualizarListaMusicas() {
    const termo = buscaInput.value.trim().toLowerCase();
    listaMusicasEl.innerHTML = '';
    const filtradas = musicas.filter(m => m.nome.toLowerCase().includes(termo) || m.cantor.toLowerCase().includes(termo));
    if (filtradas.length === 0) {
      listaMusicasEl.innerHTML = '<p style="text-align:center; color:#666;">Nenhuma m√∫sica encontrada</p>';
      return;
    }
    filtradas.forEach(m => {
      const div = document.createElement('div');
      div.className = 'musica';
      div.innerHTML = `
        <div class="musica-info">
          <p class="musica-nome">${m.nome}</p>
          <p class="musica-cantor">${m.cantor}</p>
        </div>
        <button class="fav-btn">${favoritos[m.id] ? '‚òÖ' : 'Favoritar'}</button>
      `;
      div.querySelector('.musica-info').onclick = () => tocarMusica(m.id);
      div.querySelector('.fav-btn').onclick = () => toggleFavorito(m.id);
      listaMusicasEl.appendChild(div);
    });
  }

  function tocarMusica(id) {
    const musica = musicas.find(m => m.id === id);
    if (!musica) return;
    player.src = musica.url;
    player.play();
  }

  function toggleFavorito(id) {
    if (favoritos[id]) {
      delete favoritos[id];
    } else {
      const obs = prompt("Digite uma observa√ß√£o para esta m√∫sica (opcional):", "");
      favoritos[id] = obs || "";
    }
    localStorage.setItem('favoritosMusicas', JSON.stringify(favoritos));
    atualizarListaMusicas();
    atualizarListaFavoritos();
  }

  function atualizarListaFavoritos() {
    listaFavoritosEl.innerHTML = '';
    const ids = Object.keys(favoritos);
    if (ids.length === 0) {
      listaFavoritosEl.innerHTML = '<p style="text-align:center; color:#666;">Nenhuma m√∫sica favoritada.</p>';
      return;
    }
    ids.forEach(id => {
      const m = musicas.find(m => m.id === id);
      if (!m) return;
      const div = document.createElement('div');
      div.className = 'musica';
      div.innerHTML = `
        <div class="musica-info">
          <p class="musica-nome">${m.nome}</p>
          <p class="musica-cantor">${m.cantor}</p>
          ${favoritos[id] ? `<p class="obs-text">Obs: ${favoritos[id]}</p>` : ''}
        </div>
        <button class="remove-fav">Remover</button>
      `;
      div.querySelector('.musica-info').onclick = () => tocarMusica(m.id);
      div.querySelector('.remove-fav').onclick = () => {
        delete favoritos[m.id];
        localStorage.setItem('favoritosMusicas', JSON.stringify(favoritos));
        atualizarListaMusicas();
        atualizarListaFavoritos();
      };
      listaFavoritosEl.appendChild(div);
    });
  }

  buscaInput.addEventListener('input', atualizarListaMusicas);
  atualizarListaMusicas();
  atualizarListaFavoritos();
</script>

</body>
</html>
